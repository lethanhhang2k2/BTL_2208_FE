{"version":3,"file":"static/js/47.6f0e99eb.chunk.js","mappings":"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","sources":["components/QuickRedirect/index.tsx","../node_modules/js-cookie/dist/js.cookie.mjs","api/auth.ts","routes/login/index.tsx"],"sourcesContent":["export interface LinkObject {\r\n    href: string;\r\n    text: string;\r\n    separator?: string;\r\n}\r\n\r\nconst defaultValue: LinkObject[] = [\r\n    { href: \"#\", text: \"Điều khoản\" },\r\n    { href: \"#\", text: \"Nhóm 7\" },\r\n    { href: \"#\", text: \"Tiro\" }\r\n];\r\n\r\nexport default function QuickRedirect({ link = defaultValue }: { link?: LinkObject[] }) {\r\n    return (\r\n        <div className=\"text-gray-400 flex flex-wrap justify-center mb-10\">\r\n            {link.map((item, index) => {\r\n                return (\r\n                    <div key={index} className=\"flex items-center\">\r\n                        <a href={item.href} className=\"text-gray-400 text-[14px] \">\r\n                            {item.text}\r\n                        </a>\r\n                        {(index != link.length - 1) && <span className=\"mx-2\">{item.separator || \" · \"}</span>}\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    )\r\n}","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n","import axios from \"axios\";\r\nimport Cookies from 'js-cookie'\r\n\r\nconst POST_VERIFY_TOKEN = process.env[\"REACT_APP_HOST\"] + \"/user/auth/google-login\";\r\n\r\nenum AccountStatus {\r\n    NEW_ACCOUNT = \"NEW_ACCOUNT\",\r\n    EXISTENT_ACCOUNT = \"EXISTENT_ACCOUNT\",\r\n};\r\n\r\ninterface IAccountResponse {\r\n    \"is_correct\": boolean,\r\n    \"enough_data\": boolean,\r\n    \"account_status\": AccountStatus | undefined,\r\n    \"message\": string,\r\n    \"user_data\": object,\r\n    \"token\": string,\r\n}\r\n\r\n// This function is only used for testing purposes.\r\nfunction setToken(token: string) {\r\n    Cookies.set('session-token', token);\r\n}\r\n\r\nexport async function getVerifyToken(token: string): Promise<IAccountResponse | undefined> {\r\n    try {\r\n        const response = await axios.post(POST_VERIFY_TOKEN, { credential: token }, {\r\n            headers: {\r\n                \"Access-Control-Allow-Origin\": \"*\",\r\n                \"Access-Control-Allow-Methods\": \"GET,PUT,POST,DELETE,PATCH,OPTIONS\"\r\n            }\r\n        });\r\n        console.log(response);\r\n        if (response.status === 200) {\r\n            setToken(response.data.token);\r\n            return response.data;\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n    return undefined;\r\n}","import { useState } from \"react\";\r\nimport { useGoogleAuth } from '@hooks/GoogleAuthProvider';\r\nimport { getVerifyToken } from '@api/auth';\r\nimport { Navigate } from \"react-router-dom\"\r\nimport Logo from \"@components/Logo\";\r\nimport QuickRedirect from \"@components/QuickRedirect\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport \"./index.scss\";\r\nimport GG_Logo from \"@images/gg.png\"\r\nimport illus from \"@images/login2.jpg\"\r\n\r\n\r\nexport default function Login() {\r\n    const [isRedirectUrl, setIsRedirectUrl] = useState(false);\r\n    const [redirectUrl, setRedirectUrl] = useState('');\r\n    const { isSignedIn, signIn, signOut } = useGoogleAuth();\r\n\r\n    const processSignIn = async (token: string | undefined): Promise<void> => {\r\n        return new Promise(async (resolve, reject) => {\r\n            if (token) {\r\n                const data = await getVerifyToken(token);\r\n                if (!data || !data.is_correct) {\r\n                    setIsRedirectUrl(false);\r\n                    signOut();\r\n                    reject();\r\n                }\r\n                else if (!data.enough_data) {\r\n                    setIsRedirectUrl(true);\r\n                    setRedirectUrl('/login/2');\r\n                    resolve();\r\n                }\r\n                else {\r\n                    setIsRedirectUrl(true);\r\n                    setRedirectUrl('/');\r\n                    resolve();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    const handleSignIn = async () => {\r\n        const googleUser = await signIn();\r\n\r\n        toast.promise(\r\n            processSignIn(googleUser?.tokenId), {\r\n            pending: 'Signing in...',\r\n            success: 'Đăng nhập thành công',\r\n            error: 'Đăng nhập thất bại',\r\n        });\r\n    }\r\n\r\n    const handleSignOut = () => {\r\n        signOut();\r\n    }\r\n\r\n    return (isRedirectUrl)\r\n        ? <Navigate to={redirectUrl} />\r\n        : <div className=\"w-screen h-screen bg-cover login-page\">\r\n            <ToastContainer\r\n                position=\"top-center\"\r\n                autoClose={5000}\r\n                hideProgressBar={false}\r\n                newestOnTop={false}\r\n                closeOnClick\r\n                rtl={false}\r\n                pauseOnFocusLoss\r\n                draggable\r\n                pauseOnHover\r\n            />\r\n            <div className=\"flex items-center justify-center h-screen\">\r\n                <div className=\"bg-white shadow-md rounded-3xl grid grid-cols-6 p-3 w-5/6 ss:w-4/5 3xl:w-3/5 h-3/5\">\r\n                    <div className=\"col-span-6 md:col-span-3 xl:col-span-2 mx-10 my-2 flex flex-col justify-between\">\r\n                        <div>\r\n                            <div>\r\n                                <div className=\"flex justify-center\">\r\n                                    <Logo size=\"64px\" />\r\n                                </div>\r\n                                <p className=\"text-center pb-8\"><b>Nền tảng tìm trọ cho sinh viên</b></p>\r\n                                <p className=\"text-center xl:text-justify\">Đăng ký ngay để cùng tham gia mạng lưới với hơn <b className=\"text-2xl\">100.000</b> nhà cung cấp</p>\r\n                            </div>\r\n\r\n                            <div className=\"pt-5 sm:pt-16\">\r\n                                {!isSignedIn\r\n                                    ? <button\r\n                                        className=\"flex justify-content-center w-full items-center border-2 border-solid border-gray-150 rounded-full p-2 text-ellipsis\"\r\n                                        onClick={handleSignIn}>\r\n                                        <img\r\n                                            src={GG_Logo}\r\n                                            alt=\"google\"\r\n                                            width=\"32\"\r\n                                            height=\"32\"\r\n                                        ></img>\r\n                                        <b className=\"ml-4 truncate\">Sign in with Google</b>\r\n                                    </button>\r\n                                    : <div className=\"flex justify-center\">\r\n                                        <p className=\"font-semibold\">Bạn đã đang nhập rồi!</p>\r\n                                        <button className=\"mx-1 font-bold text-bgviolet underline\" onClick={handleSignOut}>Logout</button>\r\n                                    </div>}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"w-full flex justify-center\">\r\n                            <QuickRedirect />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"hidden md:flex col-auto md:col-span-3 xl:col-span-4 overflow-hidden rounded-2xl\">\r\n                        <img\r\n                            src={illus}\r\n                            alt=\"login-illus\"\r\n                            className=\"w-full h-full object-cover\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n}"],"names":["defaultValue","href","text","QuickRedirect","link","className","map","item","index","length","separator","assign","target","i","arguments","source","key","AccountStatus","api","init","converter","defaultAttributes","set","value","attributes","document","expires","Date","now","toUTCString","encodeURIComponent","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","cookie","write","Object","create","get","cookies","jar","parts","slice","join","foundKey","read","e","remove","withAttributes","this","withConverter","freeze","path","POST_VERIFY_TOKEN","process","setToken","token","Cookies","getVerifyToken","axios","credential","headers","response","console","log","status","data","undefined","Login","useState","isRedirectUrl","setIsRedirectUrl","redirectUrl","setRedirectUrl","useGoogleAuth","isSignedIn","signIn","signOut","processSignIn","Promise","resolve","reject","is_correct","enough_data","handleSignIn","googleUser","toast","tokenId","pending","success","error","to","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","Logo","size","onClick","src","GG_Logo","alt","width","height","illus"],"sourceRoot":""}